pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
actors={}
game={}

function _init()
 game.level=1
 paddleadd(0,60,0)
 paddleadd(120,60,1)
end

function _update()
 foreach(actors,
  function(a)
   a.update(a)
   if (a.remove) then del(actors,a) end
  end
 )
end

function _draw()
 cls()
 drawmap()
 foreach(actors,
  function(a)
   a.draw(a)
  end
 )
end

function drawmap()
 if (game.level==1) then
  map(0,0,0,0)
 end
end
-->8

function actoradd(x,y)
 a={}
 a.x=x
 a.y=y
 a.pw=8	-- width in pixels
 a.ph=8 -- height in pixels
 a.fx=false
 a.fy=false
 a.sprinit=0
 a.spr=a.sprinit
 a.sprmax=0
 a.sprtime=0
 a.sprtimemax=0
 a.sw=1 -- sprite width
 a.sh=1 -- sprite height
 a.update=actorupdate
 a.draw=actordraw
 a.remove=false
 add(actors,a)
 return a
end

function actorupdate(a)
 if (a.sprtime > a.sprtimemax) then
  a.spr+=1
  if (a.spr > a.sprmax) then a.spr=a.sprinit end
 else
  a.sprtime+=1
 end
 if (actoroutofbounds(a)) then a.remove=true end
end

function actordraw(a)
 spr(a.spr,a.x,a.y,a.sw,a.sh,a.fx,a.fy)
end

function actoroutofbounds(a)
 if ((a.x+a.pw) < 0) then return true end
 if ((a.x) > 127) then return true end
 if ((a.y+a.ph) < 0) then return true end
 if ((a.y) > 127) then return true end
end
-->8
function paddleadd(x,y,player)
 a=actoradd(x,y)
 if (player==1) then a.fx=true end
 a.sprinit=2
 a.spr=a.sprinit
 a.sprmax=2
 a.update=paddleupdate
 a.player=player
end

function paddleupdate(a)
 actorupdate(a)
 if (btn(2,a.player)) then
  a.y-=1
 end
 if (btn(3,a.player)) then
  a.y+=1
 end
end
-->8
function balladd(x,y)
 a=actoradd(x,y)
 a.sprinit=1
 a.sprmax=1
 a.update=ballupdate
end

function ballupdate(a)
 actorupdate(a)
 a.x+=1
end
__gfx__
000000000aaaaa00cc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077777777
00000000aa999aa0cc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077777777
00700700a99999a0cc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077777777
00077000a99999a0cc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077777777
00077000a99999a0cc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077777777
00700700aa999aa0cc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077777777
000000000aaaaa00cc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077777777
0000000000000000cc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077777777
__gff__
0000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f0f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
